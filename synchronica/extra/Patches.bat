rem disable trace_process_memory
util\hexedit app\sync_release.exe app\sync_release.exe 0x000698D1 0xE9,0x98,0x01,0x00 0x0F,0x86,0x97,0x01

rem hardcoded router address fix for aime 
util\hexedit app\sync_release.exe app\sync_release.exe 0x009D69AC 0x6C,0x6F,0x63,0x61,0x6C,0x68,0x6F,0x73,0x74,0x3A,0x30,0x00,0x00,0x00,0x00,0x00,0x00 0x31,0x39,0x32,0x2E,0x31,0x36,0x38,0x2E,0x31,0x33,0x32,0x2E,0x34,0x39,0x3A,0x30,0x00

rem jst maintenance time bypass
util\hexedit app\sync_release.exe app\sync_release.exe 0x000CF79B 0xEB 0x74

rem harumod settings label in test menu
if exist data\scene\testmode_update\testmode_update.xtal goto testmenu_hexedit_harumod_yes
util\hexedit app\sync_release.exe app\sync_release.exe 0x009D39A0 0x53,0x4F,0x46,0x54,0x57,0x41,0x52,0x45,0x20,0x55,0x50,0x44,0x41,0x54,0x45 0x68,0x61,0x72,0x75,0x4D,0x6F,0x64,0x20,0x43,0x4F,0x4E,0x46,0x49,0x47,0x00
goto after_testmenu_hexedit
:testmenu_hexedit_harumod_yes
util\hexedit app\sync_release.exe app\sync_release.exe 0x009D39A0 0x68,0x61,0x72,0x75,0x4D,0x6F,0x64,0x20,0x43,0x4F,0x4E,0x46,0x49,0x47,0x00 0x53,0x4F,0x46,0x54,0x57,0x41,0x52,0x45,0x20,0x55,0x50,0x44,0x41,0x54,0x45
:after_testmenu_hexedit

rem assertion error swallowers
util\hexedit app\sync_release.exe app\sync_release.exe 0x001ACDD0 0xEB 0x74
util\hexedit app\sync_release.exe app\sync_release.exe 0x001AB759 0xEB 0x74
util\hexedit app\sync_release.exe app\sync_release.exe 0x001ABE7A 0xEB 0x74

rem language label in test menu jpn -> eng
rem util\hexedit app\sync_release.exe app\sync_release.exe 0x00999ACC 0x45,0x4E,0x47 0x4A,0x50,0x4E

rem do not confirm game exit/alt+f4
util\hexedit app\sync_release.exe app\sync_release.exe 0x0006904D 0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x90 0x6A,0x01,0x68,0xD0,0x46,0xD5,0x00,0x68,0xDC,0x46,0xD5,0x00,0x50,0xFF,0x15,0x5C,0x75,0xC4,0x00,0x83,0xF8,0x01,0x75,0x06

echo [i] Applying All.Net Hops fix...
util\hexedit AMCUS\AmAuthD.exe AMCUS\AmAuthd.exe 0x0000BB7E 0x01 0x20

echo [i] Linking segatools configs...
mklink /H AMCUS\segatools.ini .\segatools.ini
mklink /H app\segatools.ini .\segatools.ini

if exist ..\util\xtender.exe goto launch_xtender
exit /B 0
:launch_xtender
echo [i] Launching xtender...
cd nvram
taskkill /F /IM xtender.exe > nul 2>&1
start /MIN "" ..\util\xtender.exe
cd ..
